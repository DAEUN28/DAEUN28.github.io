---
title: "빌더 패턴"
toc: true
toc_sticky: true
tags:
  - 디자인패턴
  - 객체생성_패턴
categories: "GOF의_디자인_패턴"
---

GOF의 디자인 패턴을 읽으면서 나름의 방식으로 정리한 글입니다.



## 빌더(Builder)

복잡한 객체를 생성하는 방법과 표현하는 방법을 정의하는 클래스를 별도로 분리하여, 서로 다른 표현이라도 이를 생성할 수 있는 동일한 절차를 제공합니다.

> 다른이름: 키트(Kit)

### 활용성

빌더는 다음의 경우에 사용합니다.

- 복합 객체의 생성 알고리즘이 이를 합성하는 요소 객체들이 무엇인지 이들의 조립 방법에 독립적일 때
- 합성할 객체들의 표현이 서로 다르더라도 생성 절차에서 이를 지원해야 할 때

### 구조

![IMG_4605](https://user-images.githubusercontent.com/45457678/95748445-f3558400-0cd4-11eb-9783-cb82550cc24f.jpg)

### 참여자

- Builder: Product 객체의 일부 요소들을 생성하기 위한 추상 인터페이스를 정의합니다.
- ConcreteBuilder: 클래스에 정의된 인터페이스를 구현하며, 제품의 부품들을 모아 빌더를 복합합니다. 생성한 요소의 표현을 정의하고 관리합니다. 또한 제품을 검색하는 데 필요한 인터페이스를 제공합니다. 
- Director: Builder 인터페이스를 사용하는 객체를 합성합니다.
- Product: 생성할 복합 객체를 표현합니다. ConcreteBuilder는 제품(product)의 내부 표현을 구축하고 복합 객체가 어떻게 구성되는지에 관한 절차를 정의합니다.

### 협력방법

1. 사용자는 Director 객체를 생성하고, 이렇게 생성한 객체를 자신이 원하는 Builder 객체로 합성해 나갑니다.
2. 제품의 일부가 구축될 때마다 Director는 Builder에 통보합니다.
3. Builder는 Director의 요청을 처리하여 제품에 부품을 추가합니다.
4. 사용자는 Builder에서 제품을 검색합니다.

### 결과

1. 제품에 대한 내부 표현을 다양하게 변화할 수 있습니다. Builder 객체는 디렉터를 제공하고 제품을 복합하기 위해 필요한 추상 인터페이스를 정의합니다. 빌더를 사용하면 제품이 어떤 요소에서 복합되는지, 그리고 각 요소들의 표현 방법이 무엇인지 가릴 수 있게 됩니다. 즉, 어떤 요소로 전체 제품을 복합하고 그 요소들이 어떤 타입들로 구현되는지 알고 있는 쪽은 빌더뿐입니다. 제품을 복합할 때는 빌더에 정의된 추상 인터페이스를 통해 사용자가 동작하기 때문에, 새로운 제품의 표현 방법이나 제품의 복합 방법이 바뀔 때 추상 인터페이스를 정의한 Builder 클래스에서 상속을 통해 새로운 서브클래스를 정의하면 됩니다.
2. 생성과 표현에 필요한 코드를 분리합니다. 빌더 패턴을 사용하면, 복합 객체를 생성하고 복합 객체의 내부 표현 방법을 별도의 모듈로 정의할 수 있습니다. 사용자는 제품의 내부 구조를 정의한 클래스는 전혀 모른 채, 빌더와 상호작용을 통해서 필요한 복합 객체를 생성하게 됩니다. 왜냐하면, 이러한 제품 구조에 대한 상세한 정의를 담은 클래스는 클래스에 정의된 어떤 연산의 매개 변수로도 정의되지 않기 때문입니다.
3. 복합 객체를 생성하는 절차를 좀더 세밀하게 나눌 수 있습니다. 한번에 복합 객체를 생성하는 것처럼, 빌더 패턴은 디렉터의 통제 아래 하나씩 내부 구성요소들을 만들어 나갑니다. 디렉터가 빌더에서 만든 전체 복합 객체를 되돌려받을 때까지 제품 복합의 과정은 계속됩니다. 그렇기 때문에 Builder 클래스의 인터페이스에는 이 제품을 생성하는 과정 자체가 반영되어 있습니다.

### 예제 코드(Swift)

빌더패턴을 공부하며 만든 라이브러리입니다! 예제 코드가 궁금하신 분들은 참고해주세요. 한글문서도 있으니 마음껏 사용하셔도 좋습니다 :)

https://github.com/DAEUN28/DEBuilder



## Reference

[https://jerome.kr/entry/abstract-factory-pattern](https://jerome.kr/entry/abstract-factory-pattern)

