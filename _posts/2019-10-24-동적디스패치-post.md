---
title: "동적 디스패치"
date: 2019-10-24 20:08:28 -0400
tags:
  - Swift
  - Objective-C
categories: "이론"
---



안녕하세요 😀 

오늘은 스위프트 데이터구조와 알고리즘 책을 읽고 있었는데 `오브젝티브C에서 모든 메소드는 런타임시 메시지를 이용해서 다이나믹 디스패치 또는 동적 명령 전달 기법을 사용하는 반면, 스위프트에서 메소드는 명령 전달을 위한 다양한 기법을 제공한다` 라는 구문이 이해가 전혀 가지 않아 동적 디스패치를 까먹지 않기 위해 정리해보려고 합니다!

또한 클래스 메소드에 @objc 속성 키워드 또는 dynamic 키워드를 추가하면 강제로 동적 디스패치가 적용된다고 합니다. dynamic 키워드를 사용하면 암시적으로 @objc 속성 키워드가 암시적으로 표시된다고 하네요! 지금까지 왜 사용했는지 조금 알 것 같네요ㅠ

먼저 검색을 하고, [제드님 블로그](https://zeddios.tistory.com/296) 설명을 봤는데 동적 디스패치는 'Objective-C 런타임이 호출해야하는 특정 메소드나 함수의 구현을 **런타임에 결정**한다는 것'을 의미한다네요!

이게 대체 무슨소리지라고 생각하고 오브젝티브C의 개념을 처음으로 접해봤습니다.

오브젝티브C에서는 메소드를 메시지라는 개념으로 사용한다고 해요. 오브젝티브C의 명령 실행 체계인 메시지는 리시버, 셀렉터, 파라미터 등의 요소로 구성됩니다. 그 중 리시버는 메소드가 실행 결과를 받게 될 대상 객체이며, 파라미터는 메소드에 전달되 실행될 객체를 의미합니다. 즉, 다음예제코드의 메시지의 리시버는 postalCode이고, length는 셀렉터, 파라미터는 없는거에요!



```objective-c
// Objectiv-C
NSString *postalCode = [[NSString alloc] initWithFormat:@"%d-%d", 32259, 1234];
// postalCode = "32259-1234"
int len = [postalCode length];
// len = 10
// length는 메소드 자체가 아닌 메소드를 가리키는 이름!
```



```swift
// Swift
var postalCode: NSString = NSString(format: "%d-%d", 32259, 1234)
var len = postalCode.length
// let = 10
```



> 오브젝티브C 메시지로 모델을 전달할 때는 보통의 컴파일 시점의 바인딩이 아닌, 동적 바인딩 기법을 사용합니다. 이렇게 하면 메시지를 미리 구현해 놓지 않고, 런타임에 해당 메시지를 구현 및 실행하는 것이 가능해집니다.런타임에서 특정 객체가 즉각 메시지에 반응할 수 없는 경우에도 상속 연쇄는 해당 객체를 찾을 때까지 기다렸다가 메시지를 전달합니다. 하지만 결국 해당 객체를 찾을 수 없을 때는 nil을 반환합니다.

처음엔 위 내용이 이해가 안갔는데요..ㅜ

쉽게 생각하면 **프로그램이 실행중일때 어떤 메소드를 실행해줘!라고 메시지를 보내면 메시지를 받은 객체가 메소드의 이름을 가지고 진짜 메소드가 구현되어 있는 곳으로 가서 메소드를 실행한다. 만약 메시지를 받은 객체가 메소드를 실행할 수 없는 경우에도 해당 객체를 찾을 때까지 기다렸다가 메시지를 전달하고 못찾으면 nil을 반환한다. **라고 할 수 있을 것 같아요!



### 정적 디스패치

정적 디스패치는 런타임이 아닌 **컴파일 타임**에 메시지를 전달하는 것이라고 해요. 이 방식은 메소드 전체를 직접 호출합니다. 런타임이 아닌 컴파일 타임에 메시지를 전달하기 때문에 동적 디스패치보다 빠릅니다! 



스위프트 데이터구조와 알고리즘에 대한 책을 읽고 있는데 몰랐던 사실을 알게 되어 좋고 신기하긴 하지만 너무 어렵네요ㅠㅠㅠ 그래도 지금까지 @objc와 dynamic에 대해 잘 몰랐는데 이제 까먹지 않을 수 있을 것 같아요😊

출처: https://zeddios.tistory.com/296 [ZeddiOS]